name: palindrome-test

scenario: common

backend: local
#backend: fg
#backend: dirac

param:
  sequencer:
    start:
      type: increment
      param: {first: 1, step: 1000, last: 4000}
      name_map: {value: start}
    end:
      type: increment
#      param: {first: 1000, step: 1000, last: 20000}
      param: {first: 1000, step: 1000}
      name_map: {value: end}

  input:
    common:
      palindrome.py: palindrome.py
      cat.py: cat.py
    unit:
      watch:
        watch.py: watch.py

  workflow:
    ls_start:
      type: cmd
      actvar:
        cmd: ls -Al
    first:
      depend_on: ls_start
      type: exe
      param:
        monitor: True
      actvar:
        exe: palindrome.py
        argument: --first
        location: common
        accepted_args: 'start end'
    second:
      depend_on: ls_start
      type: exe
      param:
        monitor: True
      actvar:
        exe: palindrome.py
        argument: --second
        location: common
        accepted_args: 'start end'
    cat:
      depend_on:
        - first
        - second
      type: exe
      actvar:
        exe: cat.py
        location: common
    ls_end:
      depend_on: cat
      type: cmd
      actvar:
        cmd: ls -Al
    watch:
      type: exe
      actvar:
        exe: watch.py
